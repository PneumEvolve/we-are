<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Arcade Challenge</title>
  <link rel="stylesheet" href="style.css">
  <style>
    canvas { background:#000; display:block; margin:1rem auto; border:1px solid #62c4ff; }
    #overlay { text-align:center; }
  </style>
</head>
<body>
  <nav>
    <a href="index.html">Home</a>
    <a href="about.html">About</a>
    <a href="projects.html">Projects</a>
    <a href="earn.html">Earn &amp; Contribute</a>
    <a href="governance.html">Governance</a>
    <a href="starter-kits.html">Starter Kits</a>
    <a href="events.html">Events</a>
    <a href="team.html">Team</a>
    <a href="faq.html">FAQ</a>
    <a href="news.html">News</a>
    <a href="contact.html">Contact</a>
    <a href="arcade.html">Arcade</a>
  </nav>

  <h1>Arcade Challenge</h1>
  <canvas id="game" width="600" height="400"></canvas>
  <div id="overlay"></div>

  <script>
    const canvas = document.getElementById('game');
    const ctx = canvas.getContext('2d');
    const overlay = document.getElementById('overlay');
    let keys = {};
    let bullets = [], enemies = [], particles = [];
    let score = 0, lives = 3, level = 1;
    let lastSpawn = 0, gameOver = false, started = false;

    const player = { x: canvas.width/2, y: canvas.height-30, w:20, h:20, speed:5 };

    document.addEventListener('keydown', e => {
      keys[e.code] = true;
      if(!started && e.code === 'Enter') { start(); }
      if(gameOver && e.code === 'Enter') { reset(); }
    });
    document.addEventListener('keyup', e => keys[e.code] = false);

    function start() {
      started = true; gameOver = false; overlay.innerHTML='';
      requestAnimationFrame(loop);
    }

    function reset() {
      bullets=[]; enemies=[]; particles=[]; score=0; lives=3; level=1;
      player.x = canvas.width/2; start();
    }

    function spawnEnemy() {
      const type = Math.random()<0.5 ? 'fall' : 'zigzag';
      const enemy = { x: Math.random()* (canvas.width-20), y:-20, w:20, h:20, type, speed:1+level*0.2, dir:Math.random()<0.5?-1:1 };
      enemies.push(enemy);
    }

    function update(dt) {
      if(keys['ArrowLeft']) player.x -= player.speed;
      if(keys['ArrowRight']) player.x += player.speed;
      player.x = Math.max(0, Math.min(canvas.width-player.w, player.x));
      if(keys['Space'] && bullets.length<5+Math.floor(level/2)) {
        bullets.push({x: player.x+player.w/2-2, y:player.y, w:4, h:10, speed:6});
      }
      bullets.forEach(b => b.y -= b.speed);
      bullets = bullets.filter(b => b.y + b.h > 0);

      const now = Date.now();
      if(now - lastSpawn > Math.max(500- level*20, 100)) { spawnEnemy(); lastSpawn = now; }
      enemies.forEach(e => {
        e.y += e.speed;
        if(e.type==='zigzag') {
          e.x += e.dir * 2; if(e.x<0||e.x>canvas.width-e.w) e.dir *= -1;
        }
      });
      enemies = enemies.filter(e => e.y < canvas.height + e.h);

      bullets.forEach((b,bi)=>{
        enemies.forEach((e,ei)=>{
          if(b.x < e.x+e.w && b.x+b.w>e.x && b.y<e.y+e.h && b.y+b.h>e.y) {
            bullets.splice(bi,1); enemies.splice(ei,1); score+=10; particles.push(...explode(e.x+e.w/2,e.y+e.h/2));
          }
        });
      });
      enemies.forEach((e,ei)=>{
        if(e.y+e.h>=player.y && e.x<player.x+player.w && e.x+e.w>player.x) {
          enemies.splice(ei,1); lives--; particles.push(...explode(player.x+player.w/2,player.y+player.h/2));
          if(lives<=0) gameOver=true;
        }
        if(e.y>canvas.height) { lives--; enemies.splice(ei,1); if(lives<=0) gameOver=true; }
      });

      particles.forEach(p=>{p.x+=p.vx; p.y+=p.vy; p.life--;});
      particles = particles.filter(p=>p.life>0);

      if(score>level*100) level++;
    }

    function explode(x,y) {
      const arr=[];
      for(let i=0;i<8;i++) arr.push({x,y,vx:Math.cos(i)*2,vy:Math.sin(i)*2,life:20});
      return arr;
    }

    function draw() {
      ctx.clearRect(0,0,canvas.width,canvas.height);
      ctx.fillStyle='white';
      ctx.fillRect(player.x, player.y, player.w, player.h);
      ctx.fillStyle='red';
      bullets.forEach(b=> ctx.fillRect(b.x,b.y,b.w,b.h));
      ctx.fillStyle='lime';
      enemies.forEach(e=> ctx.fillRect(e.x,e.y,e.w,e.h));
      ctx.fillStyle='yellow';
      particles.forEach(p=> ctx.fillRect(p.x,p.y,2,2));
      ctx.fillStyle='white';
      ctx.fillText(`Score: ${score} Lives: ${lives} Level: ${level}`, 10, 15);
    }

    let last=0;
    function loop(timestamp) {
      const dt = timestamp - last; last = timestamp;
      update(dt); draw();
      if(gameOver) { overlay.innerHTML='<h2>Game Over - press Enter to restart</h2>'; started=false; }
      if(started) requestAnimationFrame(loop);
    }

    overlay.innerHTML='<h2>Press Enter to Start - Arrow keys to move, Space to fire</h2>';
  </script>

  <footer>
    <p><a href="index.html">Home</a> · <a href="about.html">About</a> · <a href="projects.html">Projects</a> · <a href="earn.html">Earn &amp; Contribute</a> · <a href="governance.html">Governance</a> · <a href="starter-kits.html">Starter Kits</a> · <a href="events.html">Events</a> · <a href="team.html">Team</a> · <a href="faq.html">FAQ</a> · <a href="news.html">News</a> · <a href="contact.html">Contact</a> · <a href="arcade.html">Arcade</a></p>
  </footer>
</body>
</html>
